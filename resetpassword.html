<DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>PMR</title>
<link rel="stylesheet" type="text/css"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/index.css">

<script src="js/modernizr.js"></script>

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/main.js"></script>
<script src="js/index.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/libsodium-wrappers/0.4.2/sodium.min.js"></script>
<!-- will need to build a custom page for under 992 px width and 1450-1490 -->
<style>
</style>
</head>
<body style="height: 100%">

	<!-- header -->
	<div class="main-nav row header header-row"
		style="box-shadow: 0px -3px 31px 5px rgba(4, 40, 111, 0.4);">
		<div class="col-md-4 grad" style="background-color: #4286f4">
			<div class="title-button button-left">
				<a class="pmr-logo" id="pmr-logo" style="color: blue; height: 100%"
					href="#"> <img src="assets/dankLogo.png" alt="PMR"
					style="height: 100%">
				</a>
			</div>
		</div>
		<div class="col-md-6 header-button "
			style="background-color: #4286f4; padding: 22px"></div>
		<div class="col-md-1" style="background-color: #4286f4">
			<div class="header-button button-right">
				<a class="cd-signup" href="#0" style="height: 100%">Sign Up</a>
			</div>
		</div>
		<div class="col-md-1" style="background-color: #4286f4">
			<div class="header-button button-right">
				<a class="cd-signin" href="#0" style="height: 100%">Log In</a>
			</div>
		</div>
	</div>
	<!-- end header -->

	<!-- password reset form -->
	<form class="cd-form" style="padding-top: 8em; padding-left: 25em; padding-right: 25em">
		<p class="fieldset">
			<label class="image-replace cd-password" for="reset-password-new">Password</label>
			<input class="full-width has-padding has-border" id="reset-password-new"
				type="password" placeholder="New Password"> <a href="#0"
				class="hide-password">Show</a>
			
		</p>

		<p class="fieldset">
			<label class="image-replace cd-password" for="reset-password-confirm">Password</label>
			<input class="full-width has-padding has-border" id="reset-password-confirm"
				type="password" placeholder="Confirm New Password"> <a href="#0"
				class="hide-password">Show</a>
		</p>


		<p class="fieldset">
			<input style="background-color: #4286f4"
				class="full-width has-padding" id="reset" type="submit"
				value="Reset Password">
		</p>
	</form>
	<!-- end password reset form -->



	<!-- footer -->
	<ul class="footer"
		style="box-shadow: 0px 6px 31px 5px rgba(4, 40, 111, 0.4);">
		<li class="button-left"><a class="pmr-logo" href="#"></a></li>
		<li class="button-right"><a href="#">Terms</a></li>
		<li class="button-right"><a href="#">Contact Us</a></li>
	</ul>




	<script>

	var serverUrl = "http://localhost:8080"
		
	$(document).ready(function() {
	
		//reset
		$("#reset").click(function(e) {
			thisPassNew = $("#reset-password-new").val();
			thisPassConfirm = $("#reset-password-confirm").val();
			var salt = makeId();
			e.preventDefault();
			if (thisPassNew.length < 1) {
				$("#reset").css("background-color","#f27a6a");
				$("#reset").val("Please Enter a Longer Password");
				setTimeout(function() {
					$("#reset").css("background-color","#4286f4");
					$("#reset").val("Reset");
				}, 4000)
			} else if (thisPassNew !== thisPassConfirm) {
				$("#reset").css("background-color","#f27a6a");
				$("#reset").val("Please Enter the Same Password");
				setTimeout(function() {
					$("#reset").css("background-color","#4286f4");
					$("#reset").val("Reset");
				}, 4000)
			} else {
				$.ajax({
					type : "POST",
					contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
					data : jQuery.param({
						email : $("#signup-email").val(),
						passHash : sodium.to_hex(sodium.crypto_generichash(32, salt + thisPassConfirm)),
						passSalt : salt,
					}),
					url : serverUrl + "/resetPassword",
					success : function(result) {
						if (result === 'true') {
							console.log("your password has been reset");
						} else {
							console.log('there was an error with your reset request')
						}
						
					}
				});
			}
		});
		
		//home
		$("#pmr-logo").click(function(e) {
			window.location.replace("/");
		});
		
	});
	
	

	</script>

</body>
</html>